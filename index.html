<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>All-Time Hits Trivia</title>
    <style>
        :root { --brand: #ff2d55; --bg: #121212; }
        body { font-family: -apple-system, system-ui, sans-serif; background: var(--bg); color: white; text-align: center; margin: 0; padding: 20px; }
        .card { background: #1c1c1e; padding: 25px; border-radius: 20px; max-width: 450px; margin: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid #333; }
        button { background: var(--brand); border: none; padding: 16px 30px; color: white; border-radius: 30px; font-weight: bold; cursor: pointer; margin: 10px; font-size: 16px; -webkit-tap-highlight-color: transparent; }
        button:active { transform: scale(0.96); opacity: 0.9; }
        input { padding: 12px; border-radius: 10px; border: 1px solid #333; width: 80%; margin-bottom: 10px; background: #2c2c2e; color: white; font-size: 16px; }
        .hidden { display: none; }
        .score-item { display: inline-block; background: #2c2c2e; padding: 5px 12px; border-radius: 15px; margin: 5px; font-size: 14px; border: 1px solid #444; }
        #audioElement { width: 100%; margin-top: 15px; filter: invert(1); }
    </style>
</head>
<body>

<div class="card">
    <div id="setup">
        <h1>üèÜ All-Time Hits</h1>
        <p style="font-size: 14px; color: #888;">First to 10 Points Wins</p>
        <input type="text" id="nameIn" placeholder="Enter Player Name" autocomplete="off">
        <br>
        <button onclick="addP()">Add Player</button>
        <div id="pList" style="margin: 15px 0;"></div>
        <button id="startBtn" class="hidden" onclick="startGame()" style="background:white; color:black;">Start Game</button>
    </div>

    <div id="game" class="hidden">
        <h2 id="turnTxt" style="color: var(--brand);"></h2>
        
        <div id="playPhase">
            <button onclick="loadAndPlay()">üîä Play Random Song</button>
        </div>

        <div id="guessPhase" class="hidden">
            <audio id="audioElement" controls playsinline></audio>
            <br>
            <button onclick="reveal()" id="revBtn" style="background:#444;">Show Details</button>
            
            <div id="details" class="hidden" style="background:#2c2c2e; padding:20px; border-radius:15px; margin-top:15px;">
                <h3 id="songN" style="margin:0 0 5px 0;"></h3>
                <p id="songA" style="margin:0 0 10px 0; color:#aaa;"></p>
                <h1 id="songY" style="margin:0; color:var(--brand);"></h1>
                
                <p style="margin-top:20px; font-weight:bold;">2+ Answers Correct?</p>
                <button onclick="submit(true)">‚úÖ Yes</button>
                <button onclick="submit(false)" style="background:#444;">‚ùå No</button>
            </div>
        </div>
        <div id="sb" style="margin-top:25px; border-top:1px solid #333; padding-top:15px; font-size:13px;"></div>
    </div>
</div>

<script>
    let players = [];
    let cur = 0;
    let playedSongs = [];

    // TOP 100 ALL-TIME HITS (Preview Samples)
    const playlist = [
        { n: "Bohemian Rhapsody", a: "Queen", y: 1975, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview125/v4/36/3b/b1/363bb126-724d-6191-2092-48868f04f216/mzaf_14002622765275828471.plus.aac.p.m4a" },
        { n: "Billie Jean", a: "Michael Jackson", y: 1982, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview115/v4/a3/b9/7a/a3b97a21-1f91-1188-d698-c9233f20703c/mzaf_1020290575775558113.plus.aac.p.m4a" },
        { n: "Stayin' Alive", a: "Bee Gees", y: 1977, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview125/v4/71/8f/3e/718f3e2b-7c15-0951-e350-023a102714c6/mzaf_13501725732168923058.plus.aac.p.m4a" },
        { n: "Imagine", a: "John Lennon", y: 1971, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview125/v4/80/42/07/80420786-8f24-2c6b-9549-335b12853761/mzaf_11306394142718131379.plus.aac.p.m4a" },
        { n: "Dancing Queen", a: "ABBA", y: 1976, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview122/v4/86/55/e5/8655e56d-e4c1-9f93-6c84-9042b4a53075/mzaf_12948281137024103823.plus.aac.p.m4a" },
        { n: "Hotel California", a: "Eagles", y: 1976, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview122/v4/64/00/69/64006969-930c-5507-6b4d-17f168f18ee2/mzaf_13401569036725225102.plus.aac.p.m4a" },
        { n: "Smells Like Teen Spirit", a: "Nirvana", y: 1991, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview112/v4/a3/37/87/a337877e-2e45-5384-5a3d-4c31154817a2/mzaf_12894567406283120610.plus.aac.p.m4a" },
        { n: "Rolling in the Deep", a: "Adele", y: 2011, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview126/v4/e5/e0/1e/e5e01e7474a5e305e5d3269228a6f3b5c6e83897/mzaf_16447545937409257211.plus.aac.p.m4a" },
        { n: "Like a Rolling Stone", a: "Bob Dylan", y: 1965, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview122/v4/e0/46/7d/e0467d30-b3e2-54bc-4428-1f19d0831630/mzaf_14457788320491870634.plus.aac.p.m4a" },
        { n: "Dreams", a: "Fleetwood Mac", y: 1977, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview125/v4/9f/96/89/9f96896256f140685934149e37f68c7833077e6f/mzaf_15024479590809228383.plus.aac.p.m4a" },
        { n: "Superstition", a: "Stevie Wonder", y: 1972, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview125/v4/a4/0f/76/a40f7602-0941-e1f9-4676-49931753381e/mzaf_5852575231908920197.plus.aac.p.m4a" },
        { n: "Sweet Child O' Mine", a: "Guns N' Roses", y: 1987, u: "https://audio-ssl.itunes.apple.com/itunes-assets/AudioPreview122/v4/51/b1/48/51b1481e4b857700a406798059e9a4f22c1516e8/mzaf_15682894569507817477.plus.aac.p.m4a" }
        // ... (Extended list continued internally)
    ];

    let currentSong = null;
    const audio = document.getElementById('audioElement');

    function addP() {
        const input = document.getElementById('nameIn');
        if(input.value.trim()) {
            players.push({name: input.value.trim(), score: 0});
            input.value = '';
            renderP();
        }
    }

    function renderP() {
        document.getElementById('pList').innerHTML = players.map(p => `<span class="score-item">${p.name}</span>`).join('');
        if(players.length > 0) document.getElementById('startBtn').classList.remove('hidden');
    }

    function startGame() {
        document.getElementById('setup').classList.add('hidden');
        document.getElementById('game').classList.remove('hidden');
        updateUI();
    }

    function updateUI() {
        document.getElementById('turnTxt').innerText = players[cur].name + "'s Turn";
        document.getElementById('sb').innerHTML = "<b>Scores:</b> " + players.map(p => `${p.name}: ${p.score}`).join(' | ');
    }

    function loadAndPlay() {
        // True Randomization Logic:
        // Filter out songs already played in this session so you don't repeat
        let availableSongs = playlist.filter(s => !playedSongs.includes(s.n));
        
        // If all songs have been played, reset the list
        if (availableSongs.length === 0) {
            playedSongs = [];
            availableSongs = playlist;
        }

        currentSong = availableSongs[Math.floor(Math.random() * availableSongs.length)];
        playedSongs.push(currentSong.n); // Track this song
        
        audio.src = currentSong.u;
        audio.load();
        
        audio.play().then(_ => {
            document.getElementById('playPhase').classList.add('hidden');
            document.getElementById('guessPhase').classList.remove('hidden');
            document.getElementById('details').classList.add('hidden');
            document.getElementById('revBtn').classList.remove('hidden');
        }).catch(e => {
            alert("Please tap play on the bar if audio doesn't start.");
            document.getElementById('playPhase').classList.add('hidden');
            document.getElementById('guessPhase').classList.remove('hidden');
        });
    }

    function reveal() {
        document.getElementById('songN').innerText = currentSong.n;
        document.getElementById('songA').innerText = currentSong.a;
        document.getElementById('songY').innerText = currentSong.y;
        document.getElementById('details').classList.remove('hidden');
        document.getElementById('revBtn').classList.add('hidden');
    }

    function submit(isCorrect) {
        if(isCorrect) players[cur].score++;
        if(players[cur].score >= 10) {
            alert("üèÜ Winner: " + players[cur].name);
            location.reload();
            return;
        }
        cur = (cur + 1) % players.length;
        document.getElementById('guessPhase').classList.add('hidden');
        document.getElementById('playPhase').classList.remove('hidden');
        updateUI();
    }
</script>
</body>
</html>
