<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üèÜ Family Hitster (Spotify Edition)</title>
    <style>
        :root { --spotify-green: #1DB954; --bg: #121212; --card: #181818; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg); color: white; text-align: center; margin: 0; padding: 20px; -webkit-tap-highlight-color: transparent; }
        
        .card { background: var(--card); padding: 25px; border-radius: 20px; max-width: 500px; margin: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.5); border: 1px solid #333; }
        
        h1 { margin-bottom: 20px; font-weight: 800; }
        .accent { color: var(--spotify-green); }
        
        button { background: var(--spotify-green); border: none; padding: 16px 25px; color: white; border-radius: 30px; font-weight: bold; cursor: pointer; margin: 10px 0; width: 100%; font-size: 16px; transition: transform 0.1s; }
        button:active { transform: scale(0.98); }
        button.secondary { background: #333; }
        button.spotify-btn { background: #1ed760; color: black; display: flex; align-items: center; justify-content: center; gap: 10px; }
        button.danger { background: transparent; border: 1px solid #444; color: #888; width: auto; font-size: 12px; margin-top: 30px; }
        
        input { width: 85%; padding: 12px; border-radius: 10px; border: 1px solid #444; margin-bottom: 10px; background: #222; color: white; font-size: 16px; }
        
        .hidden { display: none !important; }
        
        /* ACTION BOX STYLING */
        .action-box {
            background: #000;
            padding: 30px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid #333;
            min-height: 150px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .helper-text { font-size: 14px; color: #aaa; margin-bottom: 15px; line-height: 1.4; }
        
        .checkbox-group { text-align: left; background: #222; padding: 15px; border-radius: 10px; margin: 15px 0; }
        .checkbox-group label { display: flex; align-items: center; margin: 10px 0; font-size: 16px; cursor: pointer; }
        input[type="checkbox"] { width: 22px; height: 22px; margin-right: 15px; accent-color: var(--spotify-green); }

        .score-badge { display: inline-block; background: #333; padding: 5px 10px; border-radius: 10px; margin: 3px; font-size: 12px; }
        
        /* Spotify Icon SVG */
        .sp-icon { width: 24px; height: 24px; fill: black; }
    </style>
</head>
<body>

<div class="card">
    <!-- SETUP SCREEN -->
    <div id="setup">
        <h1>üéµ Family <span class="accent">Hitster</span></h1>
        <p style="color:#888;">Add players to start!</p>
        <input type="text" id="pName" placeholder="Player Name" autocomplete="off">
        <button onclick="addPlayer()">Add Player</button>
        <div id="pList" style="margin: 15px 0;"></div>
        <button id="startBtn" class="hidden" onclick="startGame()" style="background: white; color: black;">Start Game</button>
    </div>

    <!-- GAME SCREEN -->
    <div id="game" class="hidden">
        <h2 id="turnTxt" class="accent" style="margin-top: 0;"></h2>
        
        <!-- MAIN ACTION AREA -->
        <div class="action-box">
            
            <!-- STEP 1: OPEN SPOTIFY -->
            <div id="step1">
                <p class="helper-text">1. Click below to open song in Spotify.<br><b>Important:</b> Don't look at the screen (or use a DJ)!</p>
                <button onclick="openSpotify()" class="spotify-btn">
                    <svg class="sp-icon" viewBox="0 0 24 24"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.299z"/></svg>
                    Play on Spotify
                </button>
            </div>

            <!-- STEP 2: REVEAL -->
            <div id="step2" class="hidden">
                <p class="helper-text">Music playing in background app...</p>
                <p class="helper-text" style="color: var(--spotify-green);">Come back here when ready to guess!</p>
                <button onclick="showResults()" class="secondary">üëÄ Show Results</button>
            </div>

        </div>

        <!-- RESULTS SCREEN -->
        <div id="results" class="hidden">
            <h2 id="resTitle" style="margin: 5px 0;"></h2>
            <p id="resArtist" style="color: #aaa; margin: 0; font-size: 1.2em;"></p>
            <h1 id="resYear" class="accent" style="margin: 10px 0;"></h1>
            
            <div class="checkbox-group">
                <p style="margin: 0 0 10px 0; color: #aaa; font-size: 14px;">Mark correct answers (2+ for point):</p>
                <label><input type="checkbox" class="sc-check"> Song Name</label>
                <label><input type="checkbox" class="sc-check"> Artist</label>
                <label><input type="checkbox" class="sc-check"> Year</label>
            </div>
            
            <button onclick="submitTurn()">Confirm & Next Turn</button>
        </div>

        <div id="sb" style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #333; font-size: 14px; color: #888;"></div>
        <button onclick="confirmReset()" class="danger">Reset Game</button>
    </div>
</div>

<script>
    // --- DATA: REAL SPOTIFY IDS ---
    // The 'id' is the unique Spotify Track ID. 
    // This will open the specific song directly in the app.
    const rawPlaylist = [
        { n: "Bohemian Rhapsody", a: "Queen", y: 1975, id: "7tFiyTwD0nx5a1eklYtX2J" },
        { n: "Billie Jean", a: "Michael Jackson", y: 1982, id: "5ChkMS8JPOMy3J9mQ6252s" },
        { n: "Stayin' Alive", a: "Bee Gees", y: 1977, id: "5ubvP9oKmxLUVq506fgLhk" },
        { n: "I Will Always Love You", a: "Whitney Houston", y: 1992, id: "4eHbdreAnSOrDDsFfc4Fpm" },
        { n: "Shape of You", a: "Ed Sheeran", y: 2017, id: "7qiZfU4dY1lWllzX7mPBI3" },
        { n: "Rolling in the Deep", a: "Adele", y: 2011, id: "1CkvWZ0wKxM23uyovCAFvp" },
        { n: "Smells Like Teen Spirit", a: "Nirvana", y: 1991, id: "5ghIJDpPoe3CfHMGu71E6T" },
        { n: "Sweet Child O' Mine", a: "Guns N' Roses", y: 1987, id: "7o2CTH4ctstm8TNelqjb51" },
        { n: "Hotel California", a: "Eagles", y: 1976, id: "40riOy7x9W7GXjyGp4pjAv" },
        { n: "Dancing Queen", a: "ABBA", y: 1976, id: "0GjEhVFGZW8afUYGChu3Rr" },
        { n: "Imagine", a: "John Lennon", y: 1971, id: "7pKfPomDEeI4TPT6EOYjn9" },
        { n: "Mr. Brightside", a: "The Killers", y: 2004, id: "003vvx7Niy0yvhvHt4a68B" },
        { n: "Uptown Funk", a: "Mark Ronson", y: 2014, id: "32OlwWuMpZ6b0aN2RZOeMS" },
        { n: "Wonderwall", a: "Oasis", y: 1995, id: "7ygpwy2qP3NbrxVkHvUhXY" },
        { n: "Hey Jude", a: "The Beatles", y: 1968, id: "0aym2LBJBk9DA602DOaQJ5" },
        { n: "Africa", a: "Toto", y: 1982, id: "2374M0fQpWi3dLnB54qaLX" },
        { n: "Take on Me", a: "a-ha", y: 1985, id: "2WfaOiMkCvy7F5fcp2zZ8L" },
        { n: "Livin' on a Prayer", a: "Bon Jovi", y: 1986, id: "37ZJ0p5Jm13JPevGcx4SkF" },
        { n: "Girls Just Want to Have Fun", a: "Cyndi Lauper", y: 1983, id: "4y1LsJpmMti1ii2n44t4rj" },
        { n: "Every Breath You Take", a: "The Police", y: 1983, id: "1JSTJqkT5qHq8MDJnJbRE1" },
        { n: "Superstition", a: "Stevie Wonder", y: 1972, id: "33lc84JgJ6kiLXj3mG96oP" },
        { n: "Purple Rain", a: "Prince", y: 1984, id: "54X78diSLoUDI3joC2bjWZ" },
        { n: "Lose Yourself", a: "Eminem", y: 2002, id: "15JINEqzVMv3SvJTAXAKED" },
        { n: "Single Ladies", a: "Beyonc√©", y: 2008, id: "5SFXNPCmCN3Z5vY3Kuw2Uv" },
        { n: "Blinding Lights", a: "The Weeknd", y: 2019, id: "0VjIjW4GlUZAMYd2vXMi3b" },
        { n: "Flowers", a: "Miley Cyrus", y: 2023, id: "0yLdNVWF3Srea0uzk55zLn" },
        { n: "As It Was", a: "Harry Styles", y: 2022, id: "4LRPiXqCikLlN15c3yImP7" },
        { n: "Seven Nation Army", a: "The White Stripes", y: 2003, id: "3QP17S5NPLkUPPxiNcUBnF" },
        { n: "No Woman, No Cry", a: "Bob Marley", y: 1974, id: "3jDdpoIh8cQUBsXmNCyoSV" },
        { n: "I Want to Hold Your Hand", a: "The Beatles", y: 1963, id: "4pbG9SUmWIxiIU5FQ2IvpO" },
        { n: "Thriller", a: "Michael Jackson", y: 1982, id: "2LlQb7Uoj1kKyGhlkBf9aC" }
    ];

    // --- LOGIC ---
    let players = [];
    let cur = 0;
    let deck = [];
    let currentSong = null;

    function shuffle(array) {
        let currentIndex = array.length, randomIndex;
        while (currentIndex != 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
        }
        return array;
    }

    function addPlayer() {
        let n = document.getElementById('pName').value.trim();
        if(n) {
            players.push({ name: n, score: 0 });
            document.getElementById('pName').value = '';
            renderPlayers();
        }
    }

    function renderPlayers() {
        let html = players.map(p => `<span class="score-badge">${p.name}</span>`).join(' ');
        document.getElementById('pList').innerHTML = html;
        if(players.length > 0) document.getElementById('startBtn').classList.remove('hidden');
    }

    function startGame() {
        deck = shuffle([...rawPlaylist]);
        document.getElementById('setup').classList.add('hidden');
        document.getElementById('game').classList.remove('hidden');
        updateBoard();
        loadNextSong(); 
    }

    function updateBoard() {
        document.getElementById('turnTxt').innerText = players[cur].name + "'s Turn";
        document.getElementById('sb').innerHTML = "<b>SCOREBOARD</b><br>" + 
            players.map(p => `${p.name}: ${p.score}`).join(' | ');
    }

    function loadNextSong() {
        // Reset UI
        document.getElementById('results').classList.add('hidden');
        document.getElementById('step1').classList.remove('hidden');
        document.getElementById('step2').classList.add('hidden');
        
        if(deck.length === 0) deck = shuffle([...rawPlaylist]);
        currentSong = deck.pop();
    }

    function openSpotify() {
        // Open Spotify Track
        // Try to open app first, fall back to web
        const url = `https://open.spotify.com/track/${currentSong.id}`;
        window.open(url, '_blank');
        
        // Show step 2
        document.getElementById('step1').classList.add('hidden');
        document.getElementById('step2').classList.remove('hidden');
    }

    function showResults() {
        document.getElementById('step2').classList.add('hidden');
        document.getElementById('results').classList.remove('hidden');
        
        document.getElementById('resTitle').innerText = currentSong.n;
        document.getElementById('resArtist').innerText = "By: " + currentSong.a;
        document.getElementById('resYear').innerText = currentSong.y;
    }

    function submitTurn() {
        let checks = document.querySelectorAll('.sc-check:checked').length;
        if(checks >= 2) players[cur].score++;
        
        if(players[cur].score >= 10) {
            alert(players[cur].name + " WINS!");
            location.reload();
            return;
        }

        // Cleanup
        document.querySelectorAll('.sc-check').forEach(c => c.checked = false);
        cur = (cur + 1) % players.length;
        updateBoard();
        loadNextSong();
    }

    function confirmReset() {
        if(confirm("Restart game?")) location.reload();
    }
</script>
</body>
</html>
