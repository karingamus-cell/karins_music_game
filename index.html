<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Family Music Trivia</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; text-align: center; padding: 20px; }
        .card { background: #1e1e1e; padding: 20px; border-radius: 20px; max-width: 450px; margin: auto; }
        button { background: #ff2d55; border: none; padding: 15px; color: white; border-radius: 30px; font-weight: bold; cursor: pointer; width: 80%; margin: 10px 0; }
        .hidden { display: none; }
        #video-container { width: 100%; height: 250px; background: #000; margin: 15px 0; border-radius: 10px; overflow: hidden; position: relative; }
        #cover { position: absolute; top:0; left:0; width:100%; height:100%; background: #000; color: #555; display: flex; align-items: center; justify-content: center; z-index: 10; }
        .score { font-size: 14px; opacity: 0.6; margin-top: 20px; }
    </style>
</head>
<body>

<div class="card">
    <div id="setup">
        <h1>üéµ Family Hitster</h1>
        <input type="text" id="pName" placeholder="Player Name" style="padding:10px; border-radius:5px; border:none; width:70%;">
        <button onclick="addP()">Add Player</button>
        <div id="pList" style="margin:10px"></div>
        <button id="startBtn" class="hidden" onclick="startG()" style="background:white; color:black;">Start Game</button>
    </div>

    <div id="game" class="hidden">
        <h2 id="turnTxt"></h2>
        
        <div id="video-container">
            <div id="cover">‚ùì Song Playing... ‚ùì</div>
            <iframe id="ytPlayer" width="100%" height="100%" src="" frameborder="0" allow="autoplay"></iframe>
        </div>

        <button id="nextBtn" onclick="nextSong()">üé≤ Load Random Song</button>
        
        <div id="controls" class="hidden">
            <button onclick="reveal()" id="revBtn" style="background:#444;">Show Details</button>
            <div id="resultUI" class="hidden">
                <p>Did they get 2+ correct?</p>
                <button onclick="score(true)" style="width:40%">‚úÖ Yes</button>
                <button onclick="score(false)" style="background:#444; width:40%">‚ùå No</button>
            </div>
        </div>
        <div class="score" id="sb"></div>
    </div>
</div>

<script>
    let players = [];
    let cur = 0;
    
    // Using YouTube Video IDs (Stable and won't be blocked)
    const songs = [
        { id: "fHI8X4OXluQ", n: "Amazing", y: "1980s" }, // Just examples, you can find more
        { id: "dQw4w9WgXcQ", n: "Never Gonna Give You Up", y: "1987" },
        { id: "L_jWHffIx5E", n: "Smash Mouth - All Star", y: "1999" }
    ];

    function addP() {
        const n = document.getElementById('pName').value;
        if(n) { players.push({name: n, score: 0}); document.getElementById('pName').value=''; renderP(); }
    }
    function renderP() {
        document.getElementById('pList').innerText = players.map(p => p.name).join(', ');
        if(players.length > 0) document.getElementById('startBtn').classList.remove('hidden');
    }
    function startG() {
        document.getElementById('setup').classList.add('hidden');
        document.getElementById('game').classList.remove('hidden');
        update();
    }
    function update() {
        document.getElementById('turnTxt').innerText = players[cur].name + "'s Turn";
        document.getElementById('sb').innerText = players.map(p => p.name + ": " + p.score).join(' | ');
    }

    function nextSong() {
        const s = songs[Math.floor(Math.random() * songs.length)];
        // Load YouTube video and start at a random time so they don't hear the intro
        const startAt = Math.floor(Math.random() * 60) + 30;
        document.getElementById('ytPlayer').src = `https://www.youtube.com/embed/${s.id}?autoplay=1&start=${startAt}`;
        
        document.getElementById('cover').classList.remove('hidden');
        document.getElementById('controls').classList.remove('hidden');
        document.getElementById('resultUI').classList.add('hidden');
        document.getElementById('revBtn').classList.remove('hidden');
        document.getElementById('nextBtn').classList.add('hidden');
    }

    function reveal() {
        document.getElementById('cover').classList.add('hidden');
        document.getElementById('resultUI').classList.remove('hidden');
        document.getElementById('revBtn').classList.add('hidden');
    }

    function score(win) {
        if(win) players[cur].score++;
        if(players[cur].score >= 10) { alert(players[cur].name + " wins!"); location.reload(); }
        cur = (cur + 1) % players.length;
        document.getElementById('ytPlayer').src = "";
        document.getElementById('controls').classList.add('hidden');
        document.getElementById('nextBtn').classList.remove('hidden');
        update();
    }
</script>
</body>
</html>
